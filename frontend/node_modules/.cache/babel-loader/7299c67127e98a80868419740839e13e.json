{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akashkumar/Desktop/nearBuy-Digital/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/akashkumar/Desktop/nearBuy-Digital/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import{GoogleLogin}from'react-google-login';import axios from\"axios\";import{login,register}from\"../actions/userActions\";import{useDispatch}from\"react-redux\";import config from\"../config.json\";import{jsx as _jsx}from\"react/jsx-runtime\";var clientId=config.GOOGLE_CLIENT_ID;function Login(){var dispatch=useDispatch();var onSuccess=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var user,name,email,password,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:user=res.profileObj;name=user.name,email=user.email;password=config.AUTH_PASSWORD;_context.next=5;return axios.get(\"/api/users/googleauth/\".concat(email));case 5:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(data.isPresent){dispatch(login(email,password));}else{dispatch(register(name,email,password));}case 8:case\"end\":return _context.stop();}},_callee);}));return function onSuccess(_x){return _ref.apply(this,arguments);};}();var onFailure=function onFailure(res){console.log('Login failed: res:',res);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(GoogleLogin,{clientId:clientId,buttonText:\"Sign In/Sign Up\",onSuccess:onSuccess,onFailure:onFailure,cookiePolicy:'single_host_origin',style:{marginTop:'100px'}//isSignedIn={true}\n})});}export default Login;","map":{"version":3,"names":["React","GoogleLogin","axios","login","register","useDispatch","config","jsx","_jsx","clientId","GOOGLE_CLIENT_ID","Login","dispatch","onSuccess","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","user","name","email","password","_yield$axios$get","data","wrap","_callee$","_context","prev","next","profileObj","AUTH_PASSWORD","get","concat","sent","isPresent","stop","_x","apply","arguments","onFailure","console","log","children","buttonText","cookiePolicy","style","marginTop"],"sources":["/Users/akashkumar/Desktop/nearBuy-Digital/frontend/src/components/googleAuth.js"],"sourcesContent":["import React from 'react';\nimport { GoogleLogin } from 'react-google-login';\nimport axios from \"axios\";\nimport { login,register } from \"../actions/userActions\";\nimport { useDispatch } from \"react-redux\";\nimport config from \"../config.json\"\n\n\nconst clientId=config.GOOGLE_CLIENT_ID\n\nfunction Login() {\n      \n  const dispatch = useDispatch()\n  \n  \n    const onSuccess = async (res) => {\n    const user= res.profileObj;\n    const {name ,email} =user;\n     const password= config.AUTH_PASSWORD; \n     const {data} = await axios.get(`/api/users/googleauth/${email}`)\n        if( data.isPresent){\n      dispatch(login(email, password))\n    }else{\n      dispatch(register(name, email, password))\n    }\n     };\n\n  const onFailure = (res) => {\n    console.log('Login failed: res:', res); \n   };\n\n  return (\n    <div>\n       <GoogleLogin\n        clientId={clientId}\n         buttonText=\"Sign In/Sign Up\"\n        onSuccess={onSuccess}\n        onFailure={onFailure}\n        cookiePolicy={'single_host_origin'}\n        style={{ marginTop : '100px' }}\n        //isSignedIn={true}\n      />\n    </div>\n  );\n}\n\nexport default Login;"],"mappings":"gSAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,oBAAoB,CAChD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,CAACC,QAAQ,KAAQ,wBAAwB,CACvD,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAO,CAAAC,MAAM,KAAM,gBAAgB,QAAAC,GAAA,IAAAC,IAAA,yBAGnC,GAAM,CAAAC,QAAQ,CAACH,MAAM,CAACI,gBAAgB,CAEtC,QAAS,CAAAC,KAAKA,CAAA,CAAG,CAEf,GAAM,CAAAC,QAAQ,CAAGP,WAAW,EAAE,CAG5B,GAAM,CAAAQ,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,GAAG,MAAAC,IAAA,CAAAC,IAAA,CAAAC,KAAA,CAAAC,QAAA,CAAAC,gBAAA,CAAAC,IAAA,QAAAT,mBAAA,GAAAU,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACtBV,IAAI,CAAED,GAAG,CAACY,UAAU,CACnBV,IAAI,CAAUD,IAAI,CAAlBC,IAAI,CAAEC,KAAK,CAAGF,IAAI,CAAZE,KAAK,CACXC,QAAQ,CAAEjB,MAAM,CAAC0B,aAAa,CAAAJ,QAAA,CAAAE,IAAA,SACf,CAAA5B,KAAK,CAAC+B,GAAG,0BAAAC,MAAA,CAA0BZ,KAAK,EAAG,QAAAE,gBAAA,CAAAI,QAAA,CAAAO,IAAA,CAAzDV,IAAI,CAAAD,gBAAA,CAAJC,IAAI,CACR,GAAIA,IAAI,CAACW,SAAS,CAAC,CACrBxB,QAAQ,CAACT,KAAK,CAACmB,KAAK,CAAEC,QAAQ,CAAC,CAAC,CAClC,CAAC,IAAI,CACHX,QAAQ,CAACR,QAAQ,CAACiB,IAAI,CAAEC,KAAK,CAAEC,QAAQ,CAAC,CAAC,CAC3C,CAAC,wBAAAK,QAAA,CAAAS,IAAA,MAAAnB,OAAA,GACC,kBAVI,CAAAL,SAASA,CAAAyB,EAAA,SAAAxB,IAAA,CAAAyB,KAAA,MAAAC,SAAA,OAUb,CAEJ,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAItB,GAAG,CAAK,CACzBuB,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAExB,GAAG,CAAC,CACvC,CAAC,CAEF,mBACEX,IAAA,QAAAoC,QAAA,cACGpC,IAAA,CAACP,WAAW,EACXQ,QAAQ,CAAEA,QAAS,CAClBoC,UAAU,CAAC,iBAAiB,CAC7BhC,SAAS,CAAEA,SAAU,CACrB4B,SAAS,CAAEA,SAAU,CACrBK,YAAY,CAAE,oBAAqB,CACnCC,KAAK,CAAE,CAAEC,SAAS,CAAG,OAAQ,CAC7B;AAAA,EACA,EACE,CAEV,CAEA,cAAe,CAAArC,KAAK"},"metadata":{},"sourceType":"module"}